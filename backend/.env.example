# ── Required ─────────────────────────────────────────────────────────────────
# These must be set or the app will fail at startup with a validation error.

# Supabase — required for metadata service
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# JWT — for SIWS-issued tokens (min 32 characters)
JWT_SECRET=your-secret-at-least-32-chars

# ── Optional (with defaults) ─────────────────────────────────────────────────

# Server
PORT=3001

# Indexer — tikka-indexer internal API
INDEXER_URL=http://localhost:3002
INDEXER_TIMEOUT_MS=5000

# JWT expiry
JWT_EXPIRES_IN=7d

# SIWS — domain shown in sign-in message
SIWS_DOMAIN=tikka.io

# ── Rate Limiting ────────────────────────────────────────────────────────────
# Limits are per IP address. TTL values are in seconds.
# All values have sensible defaults — only set these to override.

# Default tier — applies to all public API endpoints
THROTTLE_DEFAULT_LIMIT=100   # max requests per window
THROTTLE_DEFAULT_TTL=60      # window size in seconds

# Auth tier — POST /auth/verify (brute-force protection)
THROTTLE_AUTH_LIMIT=10
THROTTLE_AUTH_TTL=60

# Nonce tier — GET /auth/nonce
THROTTLE_NONCE_LIMIT=30
THROTTLE_NONCE_TTL=60
